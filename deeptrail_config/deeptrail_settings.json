import json
from typing import List, Dict

with open("config.json", "r") as config_file:
    config = json.load(config_file)

RISK_THRESHOLD = config["risk_threshold"]
ALERT_VOLUME_INDEX = config["alert_volume_index"]
WALLET_SIGNAL_MIN = config["wallet_signal_min"]

sample_data = [
    {"token": "ABC", "volume_index": 180, "wallet_signal": 14, "risk": 75},
    {"token": "XYZ", "volume_index": 90, "wallet_signal": 6, "risk": 40},
    {"token": "DEF", "volume_index": 200, "wallet_signal": 22, "risk": 88},
]

def evaluate_risk(entry: Dict) -> str:
    alerts = []
    if entry["risk"] >= RISK_THRESHOLD:
        alerts.append("⚠️ High Risk")
    if entry["volume_index"] >= ALERT_VOLUME_INDEX:
        alerts.append("📊 Volume Spike")
    if entry["wallet_signal"] >= WALLET_SIGNAL_MIN:
        alerts.append("🧠 Smart Wallet Activity")
    if not alerts:
        return "✅ No anomaly detected"
    return " | ".join(alerts)

for token_data in sample_data:
    token = token_data["token"]
    result = evaluate_risk(token_data)
    print(f"Token {token}: {result}")
